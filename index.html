<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <title>Sheru Cloud Drive - Secure File Access</title>
    <meta name="description" content="Securely access and retrieve your saved cloud files via Telegram Gateway. Personal cloud storage interface.">
    <meta name="keywords" content="cloud storage, file viewer, telegram files, secure drive, data retrieval">
    <meta name="robots" content="index, follow"> 
    
    <meta property="og:title" content="Sheru Cloud Gateway">
    <meta property="og:description" content="Access your shared files securely.">
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://cdn-icons-png.flaticon.com/512/3767/3767084.png">

    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">

    <style>
        /* ================= CLOUD DASHBOARD CSS ================= */
        :root {
            --bg-body: #f4f6f8;
            --bg-card: #ffffff;
            --primary: #2979ff;       /* Google Blue style */
            --text-main: #333;
            --text-sub: #666;
            --border: #e0e0e0;
        }

        /* Dark Mode Auto-Support */
        @media (prefers-color-scheme: dark) {
            :root {
                --bg-body: #121212;
                --bg-card: #1e1e1e;
                --primary: #448aff;
                --text-main: #e0e0e0;
                --text-sub: #a0a0a0;
                --border: #333;
            }
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Roboto', 'Segoe UI', sans-serif; }

        body {
            background-color: var(--bg-body);
            color: var(--text-main);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* HEADER - Looks like Drive/Dropbox */
        .navbar {
            background: var(--bg-card);
            padding: 15px 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .brand {
            font-size: 1.2rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
            color: var(--primary);
        }

        /* SEARCH AREA */
        .search-area {
            background: var(--primary);
            padding: 40px 20px;
            text-align: center;
            border-bottom-left-radius: 20px;
            border-bottom-right-radius: 20px;
        }

        .search-area h2 { color: white; margin-bottom: 20px; font-weight: 500; font-size: 1.5rem; }

        .input-group {
            max-width: 600px;
            margin: 0 auto;
            position: relative;
            display: flex;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            border-radius: 8px;
            background: var(--bg-card);
            overflow: hidden;
        }

        .search-input {
            flex: 1;
            padding: 15px 20px;
            border: none;
            background: var(--bg-card);
            color: var(--text-main);
            font-size: 16px;
            outline: none;
        }

        .search-btn {
            padding: 0 25px;
            background: var(--bg-card);
            border: none;
            color: var(--primary);
            cursor: pointer;
            font-size: 18px;
            border-left: 1px solid var(--border);
            transition: 0.2s;
        }
        .search-btn:hover { background: #f5f5f5; }

        /* FILE GRID */
        .container {
            max-width: 1000px;
            margin: 30px auto;
            padding: 0 20px;
            flex: 1;
        }

        .section-title {
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--text-sub);
            margin-bottom: 15px;
            font-weight: 700;
        }

        .file-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 15px;
        }

        /* FILE CARD - Looks like a File, not a Movie Poster */
        .file-card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 10px;
            padding: 15px;
            display: flex;
            align-items: center;
            gap: 15px;
            transition: transform 0.2s, box-shadow 0.2s;
            cursor: pointer;
            text-decoration: none;
            color: inherit;
        }

        .file-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            border-color: var(--primary);
        }

        .icon-box {
            width: 45px; height: 45px;
            background: rgba(41, 121, 255, 0.1);
            color: var(--primary);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            flex-shrink: 0;
        }

        .file-info {
            flex: 1;
            overflow: hidden;
        }

        .file-name {
            font-size: 0.95rem;
            font-weight: 500;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            margin-bottom: 4px;
        }

        .file-meta {
            font-size: 0.75rem;
            color: var(--text-sub);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* UTILS */
        .loader {
            border: 3px solid rgba(0,0,0,0.1);
            border-top: 3px solid var(--primary);
            border-radius: 50%;
            width: 30px; height: 30px;
            animation: spin 1s linear infinite;
            margin: 30px auto;
            display: none;
        }

        .load-more {
            display: block;
            margin: 30px auto;
            padding: 10px 25px;
            border: 1px solid var(--border);
            background: var(--bg-card);
            color: var(--text-main);
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            display: none;
        }
        .load-more:hover { background: var(--bg-body); }

        footer {
            text-align: center;
            padding: 20px;
            font-size: 12px;
            color: var(--text-sub);
            background: var(--bg-card);
            border-top: 1px solid var(--border);
            margin-top: 40px;
        }

        @keyframes spin { 100% { transform: rotate(360deg); } }

    </style>
</head>
<body>

    <nav class="navbar">
        <div class="brand">
            <i class="fas fa-cloud-download-alt"></i> Sheru Cloud
        </div>
        <div style="font-size:0.9rem; color:var(--text-sub);">
            <i class="fas fa-shield-alt"></i> Secure Gateway
        </div>
    </nav>

    <div class="search-area">
        <h2>Access Shared Files</h2>
        <div class="input-group">
            <input type="text" id="searchInput" class="search-input" placeholder="Search file name..." autocomplete="off">
            <button class="search-btn" onclick="triggerSearch()"><i class="fas fa-search"></i></button>
        </div>
    </div>

    <div class="container">
        <div class="section-title" id="listTitle">Recent Uploads</div>
        
        <div id="loader" class="loader"></div>
        <div id="fileGrid" class="file-list"></div>
        
        <button id="loadMoreBtn" class="load-more" onclick="loadNextPage()">Load More Files</button>
    </div>

    <footer>
        <p>Sheru Cloud Drive &copy; 2026. Secure Telegram File Gateway.</p>
        <p>DMCA: This site does not host any files. It acts as a search index for user-generated content.</p>
    </footer>

    <script>
        // ================= CONFIGURATION =================
        const API_URL = "https://script.google.com/macros/s/AKfycbyRu8BUJJFkM3jFhd3BEShg98iblyfyoptsEB4vhr2XvJH9yb_biXqa9coIH_rpiubm4Q/exec";
        const BOT_USERNAME = "Dbmovie_searchbot"; 
        
        // Default Load (Use generic term like "202" or "video")
        const DEFAULT_QUERY = "202"; 
        // =================================================

        let currentPage = 1;
        let currentQuery = "";
        let isFetching = false;

        // Encryption Logic (Same as before)
        const encryptMap = { '0': 'abc', '1': 'jkl', '2': 'tgk', '3': 'vhi', '4': 'uop', '5': 'vui', '6': 'mlo', '7': 'bod', '8': 'vhl', '9': 'bnm' };
        function encryptId(id) { return id.toString().split('').map(char => encryptMap[char] || char).join(''); }

        // Fetch Function
        async function fetchFiles(query, page, isInitial = false) {
            if (isFetching) return;
            isFetching = true;
            
            const loader = document.getElementById('loader');
            const grid = document.getElementById('fileGrid');
            const btn = document.getElementById('loadMoreBtn');
            const title = document.getElementById('listTitle');

            loader.style.display = 'block';
            btn.style.display = 'none';

            if (page === 1) grid.innerHTML = '';

            // SEO: URL Update (Use 'q' instead of 'find' for file look)
            if (!isInitial) {
                const newUrl = `${window.location.pathname}?q=${encodeURIComponent(query)}`;
                window.history.pushState({path: newUrl}, '', newUrl);
                document.title = `${query} - File Search`;
                title.innerText = `Search Results: "${query}"`;
            } else {
                title.innerText = "Recent Files";
            }

            try {
                const response = await fetch(`${API_URL}?q=${encodeURIComponent(query)}&page=${page}`);
                const data = await response.json();

                if (data && data.length > 0) {
                    renderFiles(data);
                    if (data.length >= 10) btn.style.display = 'block';
                } else {
                    if (page === 1) grid.innerHTML = `<div style="text-align:center; padding:40px; color:#999; grid-column: 1/-1;">No files found.</div>`;
                }
            } catch (error) {
                console.error(error);
            } finally {
                loader.style.display = 'none';
                isFetching = false;
            }
        }

        // Render Cards (File Manager Style)
        function renderFiles(items) {
            const grid = document.getElementById('fileGrid');
            items.forEach(item => {
                const encryptedId = encryptId(item.Id);
                const botLink = `https://t.me/${BOT_USERNAME}?start=${encryptedId}`;

                // Random File Size Generator (Fake aesthetic for realism)
                const randomSize = (Math.random() * (2.5 - 0.5) + 0.5).toFixed(1) + " GB";

                const card = document.createElement('a');
                card.className = 'file-card';
                card.href = botLink;
                card.target = "_blank";
                card.innerHTML = `
                    <div class="icon-box">
                        <i class="fas fa-file-video"></i>
                    </div>
                    <div class="file-info">
                        <div class="file-name">${item.Naam}</div>
                        <div class="file-meta">
                            <span><i class="fas fa-database"></i> ${randomSize}</span>
                            <span><i class="fas fa-check-circle"></i> Verified</span>
                        </div>
                    </div>
                    <div style="color:var(--text-sub);">
                        <i class="fas fa-chevron-right"></i>
                    </div>
                `;
                grid.appendChild(card);
            });
        }

        // Handlers
        function triggerSearch() {
            const val = document.getElementById('searchInput').value.trim();
            if (val) {
                currentQuery = val;
                currentPage = 1;
                fetchFiles(val, 1);
            }
        }

        function loadNextPage() {
            currentPage++;
            fetchFiles(currentQuery, currentPage);
        }

        document.getElementById('searchInput').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') triggerSearch();
        });

        // Init
        window.onload = function() {
            const urlParams = new URLSearchParams(window.location.search);
            const q = urlParams.get('q');
            if (q) {
                document.getElementById('searchInput').value = q;
                currentQuery = q;
                fetchFiles(q, 1);
            } else {
                currentQuery = DEFAULT_QUERY;
                fetchFiles(DEFAULT_QUERY, 1, true);
            }
        }
    </script>
</body>
</html>
